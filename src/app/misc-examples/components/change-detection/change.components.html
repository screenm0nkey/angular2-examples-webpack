<section class="main">
  <p class="file">/misc-examples/components/change-detection/change.components.ts</p>
  <h4>CHANGE DETECTION</h4>

  <section class="links">
    <a routerLink="/httprx/echonest-app">Change Detection in EchonestService</a>
    <a href="https://hackernoon.com/everything-you-need-to-know-about-change-detection-in-angular-8006c51d206f"
       target="_blank">
      Everything you need to know about change detection in Angular
    </a>
    <a
      href="https://hackernoon.com/everything-you-need-to-know-about-the-expressionchangedafterithasbeencheckederror-error-e3fd9ce7dbb4"
      target="_blank">
      Everything you need to know about the `ExpressionChangedAfterItHasBeenCheckedError` error
    </a>
    <a href="http://blog.angular-university.io/how-does-angular-2-change-detection-really-work/" target="_blank">
      How does Angular Change Detection Really Work ?
    </a>
    <a href="http://blog.thoughtram.io/angular/2016/02/22/angular-2-change-detection-explained.html" target="_blank">
      Thoughtram Change Detection Explained
    </a>
    <a href="http://victorsavkin.com/post/110170125256/change-detection-in-angular-2" target="_blank">
      Victor Savin Change Detection
    </a>
    <a href="http://blog.scottlogic.com/2015/12/07/angular-2.html" target="_blank">
      ScottLogic Building a todo list
    </a>
    <a href="http://victorsavkin.com/post/133936129316/angular-immutability-and-encapsulation" target="_blank">
      Victor Savin - Immutability vs Encapsulation
    </a>
  </section>

  <ul>
    <li>Each Angular component has an associated change detector, which is created at application startup time</li>

    <li>When an component is set to <code>onPush()</code>, this will only stop the template's bindings from being
      checked. This is because in order to find out if an input has changed or not (to skip a component’s view), Angular
      needs to check the component.
    </li>

    <li>Each Angular component has an associated change detector, which is created at application startup time</li>

    <li>Change detection is triggered if any of the components @Inputs change. If the @Input is an object then only the
      object properties used in the template i.e object.firstName, will be checked
    </li>

    <li>
      When using OnPush detectors, then the framework will check an OnPush component when any of its input properties
      changes, when it fires an event, or when an Observable fires an event
    </li>

    <li>
      One of the important properties of Angular change detection is that unlike Angular 1 it enforces a uni-directional
      data flow: when the data on our controller classes gets updated, change detection runs and updates the view.
    </li>

    <li>
      If we want to toggle on/off change detection, and triggering it manually
      we just detach the change detector, which effectively turns off change detection. Then we simply trigger it
      manually every 5 seconds by calling detectChanges()
    </li>
  </ul>

  <p>
    Somewhere in Angular’s source code,there’s this thing called <strong>ApplicationRef,
    which listens to NgZones onTurnDone event</strong>. Whenever this event is fired, it executes a tick()
    function which essentially performs change detection.
  </p>

  <p>
    <code>ChangeDetectionStrategy.OnPush</code> <br>
    In Angular 2, components can subscribe to the <strong><code>onChanges()</code> lifecycle hook,
    which will be called when any of the @inputs properties change</strong>. this doesn't happen if
    changeDetection.OnPush is set. Only when the @input reference changes does it get called.
    This is the case for immutability.
  </p>

  <p>
    <i>What's interesting below is if you set the change detection to default and type into the "Local Ref"
      input, which is using a local variable reference and not
      ngModel, the change detection isn't triggered. It only works
      on the ngModel <span class="red">(change ChangeDetectionStrategy to default to see it)</span></i>
  </p>

  <p>
    Try changing the <span class="red">ChangeDetectionStrategy on the TodoListComponent from Push to Default</span> and
    then
    type into the first input ( the one using ng-model) and you will see
    in the console the component's text property is called on every event.
  </p>
  <p class="red">You need to watch the console for this example</p>
  <p>Local template variables using #reference
    <span class="red">(press return to add item)</span></p>
</section>



